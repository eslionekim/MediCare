<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>

    <title>MediCare</title>
	<!-- 구글 폰트 링크 -->
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" th:href="@{/css/common-base.css}">
	
<style>
	/* body 기본 */
	.mypage-body {
	    margin: 0;
	    background: #D5DDED;
	    font-family: 'Inter', '맑은 고딕', sans-serif;
	}

	/* 중앙 정렬 wrapper */
	.verify-wrapper {
	    display: flex;
	    justify-content: center;
	    margin-top: 80px; /* 헤더 아래 여백 */
	}

	/* 카드 */
	.verify-card {
	    width: 360px;
	    background: #ffffff;
	    padding: 28px 30px;
	    border-radius: 10px;   /* 카드만 둥글게 */
	    box-shadow: 0 6px 16px rgba(0,0,0,0.08);
	    text-align: center;
	}

	/* 제목 */
	.verify-title {
	    margin-bottom: 20px;
	    font-size: 18px;
	    font-weight: 600;
	    color: #4D6CDB;
	}

	/* input */
	.verify-card input[type="password"] {
	    width: 100%;
	    height: 36px;
	    padding: 0 10px;
	    font-size: 13px;
	    border: 1px solid #b0b7c7;
	    border-radius: 4px;
	    outline: none;
	    margin-bottom: 14px;
	}

	.verify-card input[type="password"]:focus {
	    border-color: #879BD5;
	    background: #F3F6FF;
	}

	/* 버튼 */
	.verify-card button {
	    width: 100%;
	    height: 36px;
	    background: #879BD5;
	    color: #ffffff;
	    border: none;
	    border-radius: 4px;
	    font-size: 14px;
	    font-weight: 500;
	    cursor: pointer;
	}

	.verify-card button:hover {
	    background: #6f86d6;
	}

	/* 에러 메시지 */
	.error-msg {
	    margin-top: 12px;
	    font-size: 12px;
	    color: #d9534f;
	}

</style>
<script>
		document.addEventListener('DOMContentLoaded', () => {

	    document.querySelector('.time-in').addEventListener('click', () => { //출근 처리
	        fetch('/work/time-in', { method: 'POST' })
	            .then(res =>
	                res.text().then(msg => {
	                    if (!res.ok) throw msg;
	                    alert(msg);
	                })
	            )
	            .catch(msg => alert(msg));
	    });

		document.querySelector('.time-out').addEventListener('click', () => { // 퇴근

		        if (!confirm('퇴근하시겠습니까?')) return;

		        fetch('/work/time-out', { method: 'POST' })
		            .then(res => res.text())
		            .then(msg => alert(msg))
		            .catch(() => alert('퇴근 처리 실패'));
		    });
	});

	
	function logoutCheck() {
	    if (!confirm("정말 로그아웃 하시겠습니까?")) return;

	    fetch('/logout', { method: 'POST' })
	        .then(res => res.text())
	        .then(msg => {
	            alert(msg);
	            // 로그아웃 성공하면 페이지 이동 (로그인 페이지 등)
	            window.location.href = '/login'; // 로그인 페이지 URL
	        })
	        .catch(() => alert('로그아웃 처리 실패'));
	}
	</script>


</head>
<body class="mypage-body">

    <!-- 기존 의사 헤더 그대로 -->
    <div th:replace="~{fragments/hr-header :: header(title='마이페이지', activeTab='hrMyPage')}"></div>

    <!-- 비밀번호 확인 카드 -->
    <div class="verify-wrapper">
        <div class="verify-card">
            <h2 class="verify-title">비밀번호 확인</h2>

            <form method="post" action="/hr/verifyPassword">
                <input type="password"
                       name="password"
                       placeholder="비밀번호를 입력하세요"
                       required />

                <button type="submit">확인</button>

                <p class="error-msg" th:if="${error}" th:text="${error}"></p>
            </form>
        </div>
    </div>

</body>

</html>
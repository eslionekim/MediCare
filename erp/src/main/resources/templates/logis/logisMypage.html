<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>

    <title>MediCare</title>
	<!-- êµ¬ê¸€ í°íŠ¸ ë§í¬ -->
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
   
	<link rel="stylesheet" th:href="@{/css/common-base.css}">
	<style>
		/* ì „ì²´ ë°°ê²½ */
		.mypage-body {
		    margin: 0;
		    background: #D5DDED;
		    font-family: 'Inter', 'ë§‘ì€ ê³ ë”•', sans-serif;
		}

		/* ì¤‘ì•™ wrapper */
		.mypage-wrapper {
		    display: flex;
		    justify-content: center;
		    margin-top: 50px; /* í—¤ë” ì•„ë˜ ì—¬ë°± */
		}

		/* ì¹´ë“œ */
		.mypage-card {
		    width: 400px;
		    background: #ffffff;
		    padding: 28px 30px;
		    border-radius: 10px;   /* ì¹´ë“œë§Œ ë‘¥ê¸€ê²Œ */
		    box-shadow: 0 6px 16px rgba(0,0,0,0.08);
		}

		/* ì¹´ë“œ ì œëª© */
		.mypage-title {
		    font-size: 18px;
		    font-weight: 600;
		    color: #4D6CDB;
		    text-align: center;
		    margin-bottom: 24px;
		}

		/* form-row (ë ˆì´ë¸” + ì…ë ¥) */
		.form-row {
		    display: flex;
		    flex-direction: column;
		    margin-bottom: 16px;
		}

		.form-row label {
		    font-size: 13px;
		    color: #555;
		    margin-bottom: 4px;
		}

		/* input ìŠ¤íƒ€ì¼ */
		.form-row input {
		    height: 36px;
		    padding: 0 10px;
		    font-size: 13px;
		    border: 1px solid #b0b7c7;
		    border-radius: 4px;
		    outline: none;
		}

		.form-row input:focus {
		    border-color: #879BD5;
		    background: #F3F6FF;
		}

		/* ë²„íŠ¼ */
		#mypageCard button,
		#saveBtn {
		    width: 100%;
		    height: 36px;
		    background: var(--ui-panel-title);
		    color: white;
		    border: none;
		    border-radius: 4px;
		    font-size: 14px;
		    font-weight: 500;
		    cursor: pointer;
		}

		#saveBtn:hover {
		    background: #6f86d6;
		}

	</style>
	


</head>
<body class="mypage-body">

    <!-- ê¸°ì¡´ ì˜ì‚¬ í—¤ë” -->
    <div th:replace="~{fragments/logis-header :: header(title='ë§ˆì´í˜ì´ì§€', activeTab='logisMyPage')}"></div>

    <!-- ì •ë³´ ìˆ˜ì • ì¹´ë“œ -->
    <div class="mypage-wrapper">
        <div class="mypage-card">
            <h2 class="mypage-title">ë§ˆì´í˜ì´ì§€ ì •ë³´ ìˆ˜ì •</h2>

            <form id="mypageForm">
                
                <div class="form-row">
                    <label for="password">ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</label>
                    <input type="password" id="password" placeholder="ìƒˆ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥" />
                </div>

                <div class="form-row">
                    <label for="license">ë©´í—ˆë²ˆí˜¸</label>
                    <input type="text" id="license" th:value="${profile.license_number}" />
                </div>

                <div class="form-row">
                    <label for="bank">ì€í–‰ëª…</label>
                    <input type="text" id="bank" th:value="${profile.bank_name}" />
                </div>

                <div class="form-row">
                    <label for="account">ê³„ì¢Œë²ˆí˜¸</label>
                    <input type="text" id="account" th:value="${profile.bank_account}" />
                </div>

                <button type="submit" id="saveBtn">ìˆ˜ì •</button>

            </form>
        </div>
    </div>
	<script>
			document.getElementById("mypageForm").addEventListener("submit", function (e) {
			    e.preventDefault(); // ğŸ”¥ ì´ê±° ì—†ìœ¼ë©´ ë¬´ì¡°ê±´ ì§€ê¸ˆ ë¬¸ì œ ë‚¨
			
			    const data = {
			        password: document.getElementById("password").value,
			        license: document.getElementById("license").value,
			        bank: document.getElementById("bank").value,
			        account: document.getElementById("account").value
			    };
			
			    fetch("/logis/logisMyPage", {
			        method: "PUT",
			        headers: { "Content-Type": "application/json" },
			        body: JSON.stringify(data)
			    })
			    .then(res => {
			        if (!res.ok) throw new Error("ì„œë²„ ì˜¤ë¥˜");
			        return res.text();
			    })
			    .then(msg => {
			        alert(msg); // "ìˆ˜ì • ì™„ë£Œ"
			        location.reload();
			    })
			    .catch(err => {
			        console.error(err);
			        // âŒ ì´ alert ëœ¨ë©´ ì§„ì§œ ì„œë²„ ë¬¸ì œì¼ ë•Œë§Œ
			        alert("ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
			    });
			});
	</script>
</body>
</html>